<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A3â†’A4 PDFåˆ†å‰²ãƒ„ãƒ¼ãƒ«</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“„ A3â†’A4 PDFåˆ†å‰²ãƒ„ãƒ¼ãƒ«</h1>
            <p class="subtitle">A3ã‚µã‚¤ã‚ºã®PDFã‚’A4ã‚µã‚¤ã‚º2ãƒšãƒ¼ã‚¸ã«åˆ†å‰²ã—ã¾ã™</p>
        </header>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <main>
            <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" id="uploadForm">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">ğŸ“¤</div>
                    <p class="upload-text">PDFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—</p>
                    <p class="upload-text-sub">ã¾ãŸã¯</p>
                    <label for="fileInput" class="file-label">
                        ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
                    </label>
                    <input type="file" name="file" id="fileInput" accept=".pdf" required>
                    <p class="file-info" id="fileInfo"></p>
                </div>

                <div class="options">
                    <h3>ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š</h3>
                    <div class="option-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="vertical" id="vertical">
                            <span>ç¸¦æ›¸ããƒ¢ãƒ¼ãƒ‰ï¼ˆå³â†’å·¦ã®é †åºï¼‰</span>
                        </label>
                    </div>
                    <div class="option-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="rotate" id="rotate">
                            <span>90åº¦å›è»¢</span>
                        </label>
                    </div>
                </div>

                <div class="submit-area">
                    <button type="submit" class="submit-btn" id="submitBtn" disabled>
                        <span class="btn-text">PDFã‚’åˆ†å‰²</span>
                        <span class="spinner" id="spinner"></span>
                    </button>
                </div>
            </form>

            <div class="info-section">
                <h3>ä½¿ã„æ–¹</h3>
                <ol>
                    <li>A3ã‚µã‚¤ã‚ºã®PDFãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—</li>
                    <li>å¿…è¦ã«å¿œã˜ã¦ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®š</li>
                    <li>ã€ŒPDFã‚’åˆ†å‰²ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li>åˆ†å‰²ã•ã‚ŒãŸA4ã‚µã‚¤ã‚ºã®PDFãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™</li>
                </ol>

                <h3>ä»•æ§˜</h3>
                <ul>
                    <li>æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: 50MB</li>
                    <li>å¯¾å¿œå½¢å¼: PDFã®ã¿</li>
                    <li>A3ã®1ãƒšãƒ¼ã‚¸ â†’ A4ã®2ãƒšãƒ¼ã‚¸ã«åˆ†å‰²</li>
                    <li>ãƒšãƒ¼ã‚¸é †åº: å·¦â†’å³ï¼ˆç¸¦æ›¸ããƒ¢ãƒ¼ãƒ‰ã§ã¯å³â†’å·¦ï¼‰</li>
                </ul>
            </div>
        </main>

        <footer>
            <p>Â© 2024 A3â†’A4 PDFåˆ†å‰²ãƒ„ãƒ¼ãƒ«</p>
        </footer>
    </div>

    <script>
        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');
        const submitBtn = document.getElementById('submitBtn');
        const uploadArea = document.getElementById('uploadArea');
        const uploadForm = document.getElementById('uploadForm');
        const spinner = document.getElementById('spinner');

        // File selection
        fileInput.addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                const file = e.target.files[0];
                fileInfo.textContent = `é¸æŠã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«: ${file.name} (${formatFileSize(file.size)})`;
                submitBtn.disabled = false;
                uploadArea.classList.add('has-file');
            }
        });

        // Drag and drop
        uploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');

            if (e.dataTransfer.files.length > 0) {
                const file = e.dataTransfer.files[0];
                if (file.type === 'application/pdf') {
                    fileInput.files = e.dataTransfer.files;
                    fileInfo.textContent = `é¸æŠã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«: ${file.name} (${formatFileSize(file.size)})`;
                    submitBtn.disabled = false;
                    uploadArea.classList.add('has-file');
                } else {
                    alert('PDFãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½ã§ã™');
                }
            }
        });

        // Form submission
        uploadForm.addEventListener('submit', function(e) {
            submitBtn.disabled = true;
            submitBtn.classList.add('loading');
            spinner.style.display = 'inline-block';
        });

        // Format file size
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            else if (bytes < 1048576) return Math.round(bytes / 1024) + ' KB';
            else return Math.round(bytes / 1048576) + ' MB';
        }
    </script>
</body>
</html>